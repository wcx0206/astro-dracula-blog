---
title: redis数据结构
tags:
 - Redis
date: 2025-02-26 11:02:50
---

### Redis 的常用数据结构

<!--more-->

![Redis 数据类型概览](https://oss.javaguide.cn/github/javaguide/database/redis/redis-overview-of-data-types-2023-09-28.jpg)

Redis 是一个高性能的键值存储系统，支持多种数据类型，每种数据类型都有其独特的结构和应用场景。以下是 Redis 常见的数据类型、它们之间的区别以及对应的应用场景总结：

### 1. **字符串（String）**

- **结构**：字符串是最基本的数据类型，键对应一个简单的值。值可以是字符串、数字或二进制数据（如图片）。
- **特点**：
  - 单值存储，支持原子操作。
  - 支持多种操作，如字符串拼接、数值加减等。
- **应用场景**：
  - **缓存**：存储用户会话信息、页面缓存等。
  - **计数器**：使用`INCR`和`DECR`命令实现计数器功能，如网站的访问次数。
  - **对象存储**：将对象序列化后存储为字符串。

- **简单语法实例**：

  ```
  SET user:1 "Alice"
  GET user:1
  INCR counter
  ```

  



### 2. **哈希（Hash）**
- **结构**：哈希是一个键值对集合，**键对应一个哈希表，哈希表中存储多个字段和值**。

- **特点**：
  - 每个哈希表可以存储多个字段（field）和值（value）。
  - 支持原子操作，可以对单个字段进行增删改查。
  
- **应用场景**：
  - **对象存储**：存储对象的多个属性，如用户信息（用户名、密码、邮箱等）。
  - **会话管理**：存储用户会话中的多个属性。
  - **配置信息**：存储系统的配置参数。
  
- **简单语法实例**：

  ```
  HSET user:1 name "Alice" age 30
  HGET user:1 name
  HGETALL user:1
  HDEL user:1 age
  ```

  

### 3. **列表（List）**
- **结构**：列表是一个**有序的字符串集合**，支持**从头部或尾部插入和删除元素**。

- **特点**：
  - 支持从两端高效地插入和删除元素。
  - 可以实现队列和栈的功能。
  
- **应用场景**：
  - **消息队列**：使用`LPUSH`和`RPOP`实现先进先出的队列。
  - **任务队列**：存储待处理的任务列表。
  - **聊天记录**：存储用户的聊天消息。
  
- **简单语法实例**：

  ```
  LPUSH queue task1 task2
  RPUSH queue task3
  LPOP queue
  LRANGE queue 0 -1
  ```

  

### 4. **集合（Set）**
- **结构**：集合是一个**无序的字符串集合**，支持集合操作（如并集、交集、差集）。
- **特点**：
  - **元素唯一，不会重复**。
  - 支持高效的成员检查、添加和删除操作。
- **应用场景**：
  - **去重**：存储唯一的数据，如用户关注的列表。
  - **权限管理**：存储用户的角色或权限集合。
  - **社交关系**：存储用户的好友列表。
- **简单语法实例**：

  ```
  SADD users Alice Bob
  SREM users Bob
  SISMEMBER users Alice
  SMEMBERS users
  ```

  


### 5. **有序集合（Sorted Set）**
- **结构**：有序集合**是一个带有分数的字符串集合，元素按照分数排序**。
- **特点**：
  - 每个元素都有一个分数，元素根据分数自动排序。
  - 支持范围查询和排名操作。
- **应用场景**：
  - **排行榜**：存储游戏分数或用户积分，按分数排序。
  - **时间序列数据**：存储带有时间戳的日志或事件。
  - **优先级队列**：根据分数实现优先级调度。

- **简单语法实例**：

  ```bash
  # 添加元素到有序集合
  ZADD leaderboard 100 Alice 200 Bob
  
  # 移除有序集合中的元素
  ZREM leaderboard Bob
  
  # 获取成员的排名（从小到大）
  ZRANK leaderboard Alice
  
  # 获取成员的排名（从大到小）
  ZREVRANK leaderboard Alice
  
  # 获取指定范围内的成员及其分数
  ZRANGE leaderboard 0 -1 WITHSCORES
  ```

  

### 6. **位图（Bitmap）**

- **结构**：位图是一个由二进制位组成的数组，每个位可以表示一个布尔值。

- **特点**：
  - 高效的存储方式，节省空间。
  - 支持位操作（如设置、获取、统计）。

- **应用场景**：
  - **用户签到**：记录用户是否签到。
  - **权限管理**：用位表示**用户的权限**。
  - **大数据统计**：统计用户行为（如是否访问过某个页面）。

- **简单语法实例**：

  ```bash
  # 设置位
  SETBIT user:1 0 1
  
  # 获取位
  GETBIT user:1 0
  
  # 统计位图中值为 1 的位数
  BITCOUNT user:1
  ```

  


### 7. **超日志（HyperLogLog）**
- **结构**：超日志是一种用于统计唯一元素数量的近似算法。

- **特点**：
  - 高效的内存使用，适合处理海量数据。
  - 支持并集操作，可以合并多个统计结果。

- **应用场景**：

  - **独立访客统计**：统计网站的独立访客数量。
  - **去重统计**：统计某个时间段内的唯一事件。

- **简单语法实例**：

  ```bash
  # 添加元素到超日志
  PFADD visitors user1 user2
  
  # 获取超日志中不同元素的近似数量
  PFCOUNT visitors
  
  # 合并多个超日志
  PFMERGE destkey sourcekey1 sourcekey2
  ```

  


### 8. **地理空间索引（Geo）**
- **结构**：地理空间索引用于存储地理位置信息（经度和纬度）。

- **特点**：
  - 支持地理空间查询，如距离计算、范围查询。
  - 支持高效的地理数据存储和检索。

- **应用场景**：
  - **位置服务**：存储用户的位置信息，提供附近地点查询。
  - **物流系统**：计算两点之间的距离。

- **简单语法实例**：

  ```bash
  # 添加地理空间位置
  GEOADD locations 116.39 39.91 "Beijing" 121.47 31.23 "Shanghai"
  
  # 获取位置的经纬度
  GEOPOS locations Beijing
  
  # 计算两个位置之间的距离
  GEODIST locations Beijing Shanghai km
  
  # 查找指定范围内的位置
  GEORADIUS locations 116.39 39.91 10 km WITHDIST
  ```

  
